import matplotlib.pyplot as plt
import numpy as np
from mabandit.Multi_arm_bandit_algorithms.GP_bandits.Explore_exploit_tradeoff import Explore_exploit_tradeoff

def f(x):
    return -(x**2 + 10*np.sin(x))

noise = 0.1
x = [-40, -5, 10]
y = [np.random.normal(f(i), noise) for i in x]

u_bound = 10
l_bound = -40


for i in range(25):
    x_, value, y_= Explore_exploit_tradeoff(x, y,
                                            upper_bound=u_bound, lower_bound=l_bound,
                                            tradeoff_factor=0.1, noise=noise,
                                            return_aqs=True, max_iter=30)



    x.append(x_)
    x.sort()
    y = [np.random.normal(f(i), noise) for i in x]


    fig, arr = plt.subplots(2, sharex=True)

    arr[0].plot(np.linspace(l_bound, u_bound, 50), value)
    arr[0].set_title("Aqusition Function")
    arr[1].plot(x, y, 'ro')
    arr[0].plot(x_, y_, 'g*')
    fig.savefig(str(i))
    plt.close(fig)

    print(x_)
